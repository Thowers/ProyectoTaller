DROP DATABASE HOPERECORDS;
CREATE DATABASE HOPERECORDS;
USE HOPERECORDS

CREATE TABLE ARTISTA
(
ID_ARTISTA MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
NOMBRE_BANDA VARCHAR(50) NOT NULL,
DEBUT varchar(11) NOT NULL,
CONTRATO VARCHAR(50) NOT NULL,
GENERO VARCHAR(50) NOT NULL,
ESTADO VARCHAR(50)NOT NULL,
PAIS VARCHAR(50) NOT NULL,
DESCRIPCION TEXT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE STREAMING
(
ID_STREAMING MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA_ALBUM MEDIUMINT NOT NULL,
PLATAFORMA VARCHAR(50) NOT NULL,
FECHA DATE NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CANCION
(
ID_CANCION MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA_ALBUM MEDIUMINT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
IS_SINGLE VARCHAR(50) NOT NULL,
SALIDA DATE NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CONCIERTO
(
ID_CONCIERTO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_TOUR MEDIUMINT NOT NULL,
ID_TICKET MEDIUMINT NOT NULL,
ID_ARTISTA MEDIUMINT NOT NULL, 
ID_RECINTO MEDIUMINT NOT NULL,
ID_RIDER MEDIUMINT NOT NULL,
ID_PROMOTOR MEDIUMINT NOT NULL,
FECHA DATE NOT NULL
)ENGINE=InnoDB;

CREATE TABLE RIDER
(
ID_RIDER MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA MEDIUMINT NOT NULL,
TIPO VARCHAR(50) NOT NULL,
CANTIDAD MEDIUMINT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE MERCH
(
ID_MERCH MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA MEDIUMINT NOT NULL,
TIPO VARCHAR(50) NOT NULL,
COLOR VARCHAR(50) NOT NULL,
VALOR MEDIUMINT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE VENTA
(
ID_VENTA MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_FACTURA MEDIUMINT NOT NULL,
ID_MERCH MEDIUMINT NOT NULL,
FECHA DATE NOT NULL,
VALOR MEDIUMINT NOT NULL,
DESTINO VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CLIENTE
(
ID_CLIENTE MEDIUMINT PRIMARY KEY AUTO_INCREMENT
)ENGINE=InnoDB;

CREATE TABLE USUARIO_CLIENTE
(
ID_USER_CLIENTE MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_CLIENTE MEDIUMINT NOT NULL,
ID_USER MEDIUMINT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE USUARIO
(
ID_USER MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
NOMBRE VARCHAR(50) NOT NULL,
PAIS VARCHAR(50) NOT NULL,
USUARIO VARCHAR(50) NOT NULL,
CONTRA VARCHAR(50) NOT NULL,
EMAIL VARCHAR(120) UNIQUE NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CONTACTO_USER
(
ID_CONTACTO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_USER MEDIUMINT NOT NULL,
NUMERO MEDIUMINT NOT NULL,
DIRECCION VARCHAR(50) NOT NULL,
CORRE VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE PREORDEN
(
ID_PREORDEN MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ALBUM MEDIUMINT NOT NULL,
ID_CLIENTE MEDIUMINT NOT NULL,
FECHA DATE NOT NULL
)ENGINE=InnoDB;

CREATE TABLE FACTURA
(
ID_FACTURA MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_EMPLEADO MEDIUMINT NOT NULL,
ID_MERCH MEDIUMINT NOT NULL,
FECHA DATE NOT NULL,
VALOR MEDIUMINT NOT NULL,
CANTIDAD MEDIUMINT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE VIDEO
(
ID_VIDEO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_CANCION MEDIUMINT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
TIPO VAARCHAR(50) NOT NULL,
LOCACION VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE VALORACION
(
ID_VALORACION MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA_ALBUM MEDIUMINT NOT NULL,
ID_CANCION MEDIUMINT NOT NULL,
PUNTUACION VARCHAR(50) NOT NULL,
COMENTARIOS TEXT NULL
)ENGINE=InnoDB;

CREATE TABLE EMPLEADO 
(
ID_EMPLEADO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
NOMBRE VARCHAR(50) NOT NULL,
APELLIDO VARCHAR(50) NOT NULL,
CARGO MEDIUMINT(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CONTACTO_EMP
(
ID_CONTACTO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_EMPLEADO MEDIUMINT NOT NULL,
NUMERO MEDIUMINT NOT NULL,
DIRECCION VARCHAR(50) NOT NULL,
CORREO VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE TICKET
(
ID_TICKET MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
FECHA DATE NOT NULL,
TIPO VARCHAR(50) NOT NULL,
ESTADO VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE RECINTO
(
ID_RECINTO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
CAPACIDAD MEDIUMINT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
TIPO VARCHAR(50) NOT NULL,
HORARIO TIME NOT NULL
)ENGINE=InnoDB;

CREATE TABLE PROMOTOR
(
ID_PROMOTOR MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
NOMBRE VARCHAR(50) NOT NULL,
TIPO VARCHAR(50) NOT NULL,
EXPERIENCIA LONGTEXT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CONTACTO_PROMOTOR
(
ID_CONTACTO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_PROMOTOR MEDIUMINT NOT NULL,
NUMERO MEDIUMINT NOT NULL,
DIRECCION VARCHAR(50) NOT NULL,
CORREO VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE NOTIFICACION
(
ID_NOTIFICACION MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_USER MEDIUMINT NOT NULL,
MEDIO VARCHAR(50) NOT NULL,
FECHA DATE NOT NULL
)ENGINE=InnoDB;

CREATE TABLE TOUR
(
ID_TOUR MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA MEDIUMINT NOT NULL,
ID_PROMOTOR MEDIUMINT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
INICIO DATE NOT NULL,
FIN DATE NOT NULL,
PRESUPUESTO INT NOT NULL,
ESTADO VARCHAR(50) NOT NULL,
TIPO VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE DISTRIBUIDOR
(
ID_DISTRIBUIDOR MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_MERCH MEDIUMINT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
PAIS VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CONTACTO_DISTRIBUIDOR
(
ID_CONTACTO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_DISTRIBUIDOR MEDIUMINT NOT NULL,
NUMERO MEDIUMINT NOT NULL,
DIRECCION VARCHAR(50) NOT NULL,
CORREO VARCHAR(50) NOT NULL
)ENGINE=InnoDB;

CREATE TABLE CONTRATO
(
ID_CONTRATO MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA MEDIUMINT NOT NULL,
INICIO DATE NOT NULL,
FIN DATE NULL,
ESTADO VARCHAR(50) NOT NULL,
COMPENSACION INT NOT NULL
)ENGINE=InnoDB;

CREATE TABLE ARTISTA_ALBUM
(
ID_ARTISTA_ALBUM MEDIUMINT PRIMARY KEY AUTO_INCREMENT,
ID_ARTISTA MEDIUMINT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
SALIDA DATE NOT NULL
)ENGINE=InnoDB;

ALTER TABLE CONTRATO
ADD CONSTRAINT FKID_ARTISTA
FOREIGN KEY (ID_ARTISTA) REFERENCES ARTISTA(ID_ARTISTA);

ALTER TABLE STREAMING
ADD CONSTRAINT FKID_ARTISTA_ALBUM
FOREIGN KEY (ID_ARTISTA_ALBUM) REFERENCES ARTISTA_ALBUM(ID_ARTISTA_ALBUM);

ALTER TABLE ARTISTA_ALBUM
ADD CONSTRAINT FKID_ARTISTA2
FOREIGN KEY (ID_ARTISTA) REFERENCES ARTISTA(ID_ARTISTA);

ALTER TABLE ARTISTA_ALBUM
ADD CONSTRAINT FKID_ALBUM 
FOREIGN KEY (ID_ALBUM) REFERENCES ALBUM(ID_ALBUM);

ALTER TABLE CANCION
ADD CONSTRAINT FKID_ARTISTA_ALBUM2
FOREIGN KEY (ID_ARTISTA_ALBUM) REFERENCES ARTISTA_ALBUM(ID_ARTISTA_ALBUM);

ALTER TABLE ARTISTA 
ADD CONSTRAINT FKID_LIDER
FOREIGN KEY (ID_LIDER) REFERENCES MIEMBRO(ID_MIEMBRO);

ALTER TABLE VALORACION
ADD CONSTRAINT FKID_ARTISTA_ALBUM3
FOREIGN KEY (ID_ARTISTA_ALBUM) REFERENCES ARTISTA_ALBUM(ID_ARTISTA_ALBUM);

ALTER TABLE VALORACION
ADD CONSTRAINT FKID_CANCION2
FOREIGN KEY (ID_CANCION) REFERENCES CANCION(ID_CANCION);

ALTER TABLE TOUR
ADD CONSTRAINT FKID_ARTISTA3
FOREIGN KEY (ID_ARTISTA) REFERENCES ARTISTA(ID_ARTISTA);

ALTER TABLE TOUR
ADD CONSTRAINT FKID_PROMOTOR 
FOREIGN KEY (ID_PROMOTOR) REFERENCES PROMOTOR(ID_PROMOTOR);

ALTER TABLE CONCIERTO
ADD CONSTRAINT FKID_TOUR
FOREIGN KEY (ID_TOUR) REFERENCES TOUR(ID_TOUR);

ALTER TABLE CONCIERTO
ADD CONSTRAINT FKID_TICKET
FOREIGN KEY (ID_TICKET) REFERENCES TICKET(ID_TICKET);

ALTER TABLE CONCIERTO
ADD CONSTRAINT FKID_ARTISTA4
FOREIGN KEY (ID_ARTISTA) REFERENCES ARTISTA(ID_ARTISTA);

ALTER TABLE CONCIERTO
ADD CONSTRAINT ID_RECINTO
FOREIGN KEY (ID_RECINTO) REFERENCES RECINTO(ID_RECINTO);

ALTER TABLE CONCIERTO
ADD CONSTRAINT FKID_RIDER
FOREIGN KEY (ID_RIDER) REFERENCES RIDER(ID_RIDER);

ALTER TABLE CONCIERTO
ADD CONSTRAINT FKID_PROMOTOR2
FOREIGN KEY (ID_PROMOTOR) REFERENCES PROMOTOR(ID_PROMOTOR);

ALTER TABLE RIDER
ADD CONSTRAINT FKID_ARTISTA5 
FOREIGN KEY (ID_ARTISTA) REFERENCES ARTISTA(ID_ARTISTA);

ALTER TABLE PREORDEN
ADD CONSTRAINT FKID_ALBUM2
FOREIGN KEY (ID_ARTISTA_ALBUM) REFERENCES ALBUM(ID_ARTISTA_ALBUM);

ALTER TABLE PREORDEN
ADD CONSTRAINT FKID_CLIENTE
FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE);

ALTER TABLE VENTA
ADD CONSTRAINT FKID_FACTURA
FOREIGN KEY (ID_FACTURA) REFERENCES FACTURA(ID_FACTURA);

ALTER TABLE VENTA
ADD CONSTRAINT FKID_MERCH
FOREIGN KEY (ID_MERCH) REFERENCES MERCH(ID_MERCH);

ALTER TABLE MERCH
ADD CONSTRAINT FKID_ARTISTA6 
FOREIGN KEY (ID_ARTISTA) REFERENCES ARTISTA(ID_ARTISTA);

ALTER TABLE FACTURA
ADD CONSTRAINT FKID_MERCH2
FOREIGN KEY (ID_MERCH) REFERENCES MERCH(ID_MERCH);

ALTER TABLE FACTURA
ADD CONSTRAINT FKID_EMPLEADO 
FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO(ID_EMPLEADO);

ALTER TABLE FACTURA
ADD CONSTRAINT FKID_CLIENTE2 
FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE);

ALTER TABLE DISTRIBUIDOR
ADD CONSTRAINT FKID_MERCH3
FOREIGN KEY (ID_MERCH) REFERENCES MERCH(ID_MERCH);

ALTER TABLE CONTACTO_DISTRIBUIDOR
ADD CONSTRAINT FKID_DISTRIBUIDOR
FOREIGN KEY (ID_DISTRIBUIDOR) REFERENCES DISTRIBUIDOR(ID_DISTRIBUIDOR);

ALTER TABLE CONTACTO_PROMOTOR
ADD CONSTRAINT FKID_PROMOTOR3
FOREIGN KEY (ID_PROMOTOR) REFERENCES PROMOTOR(ID_PROMOTOR);

ALTER TABLE USUARIO_CLIENTE
ADD CONSTRAINT FKID_CLIENTE3
FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE);

ALTER TABLE USUARIO_CLIENTE
ADD CONSTRAINT FKID_USER2
FOREIGN KEY (ID_USER) REFERENCES USUARIO(ID_USER);

ALTER TABLE CONTACTO_EMP
ADD CONSTRAINT FKID_EMPLEADO2
FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO(ID_EMPLEADO);

ALTER TABLE NOTIFICACION
ADD CONSTRAINT FKID_NOTIFICACION
FOREIGN KEY (ID_USER) REFERENCES USUARIO(ID_USER);

ALTER TABLE CONTACTO_USER
ADD CONSTRAINT FKID_USER
FOREIGN KEY (ID_USER) REFERENCES USUARIO(ID_USER);

INSERT INTO ARTISTA (NOMBRE_BANDA, DEBUT, CONTRATO, GENERO, ESTADO, PAIS, DESCRIPCION) VALUES ('RYAN CASTRO', '2016-03-02', 'Activo', 'Urbano', 'Activo', 'COLOMBIA', 'EL CANTANTE DEL QUESO' );
INSERT INTO ARTISTA (NOMBRE_BANDA, DEBUT, CONTRATO, GENERO, ESTADO, PAIS, DESCRIPCION) VALUES ('BLESSD', '2018-05-12', 'Activo', 'Urbano', 'Activo', 'COLOMBIA', 'EL BENDITO' );
INSERT INTO ARTISTA (NOMBRE_BANDA, DEBUT, CONTRATO, GENERO, ESTADO, PAIS, DESCRIPCION) VALUES ('PAULO LONDRA', '2017-06-20', 'Activo', 'Urbano', 'Activo', 'ARGENTINA', 'PAULITO' );
INSERT INTO ARTISTA (NOMBRE_BANDA, DEBUT, CONTRATO, GENERO, ESTADO, PAIS, DESCRIPCION) VALUES ('FEID', '2017-03-07', 'Activo', 'Urbano', 'Activo', 'COLOMBIA', 'FERXXO MOR' );
INSERT INTO ARTISTA (NOMBRE_BANDA, DEBUT, CONTRATO, GENERO, ESTADO, PAIS, DESCRIPCION) VALUES ('NICOLAI FELLA', '2011-03-07', 'Activo', 'Rap', 'Activo', 'COLOMBIA', 'MR ERROR' );